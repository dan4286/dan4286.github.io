<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Template</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            margin: 0 auto;
            padding: 80px 20px 20px 20px;
        }

        .site-header {
            background: rgba(255, 255, 255, 0.98);
            margin: 0px -20px 40px -20px;
            padding: 30px 20px;
            border-radius: 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            text-align: center;
        }

        .site-header.selected {
            border: 3px solid #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .site-header .section-label {
            position: absolute;
            top: -10px;
            left: 15px;
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .site-header:hover .section-label,
        .site-header.selected .section-label {
            opacity: 1;
        }

        .site-header h1 {
            color: #4a5568;
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .site-header p {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .section {
	    max-width: 1200px;
            background: rgba(255, 255, 255, 0.95);
            margin: 20px auto;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .section.selected {
            border: 3px solid #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .section-label {
            position: absolute;
            top: -10px;
            left: 15px;
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .section:hover .section-label,
        .section.selected .section-label {
            opacity: 1;
        }

        .section h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section h2 {
            color: #2d3748;
            font-size: 2em;
            margin-bottom: 15px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #4a5568;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .section p {
            margin-bottom: 15px;
            font-size: 1.1em;
            text-align: justify;
        }

        .section img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .section img:hover {
            transform: scale(1.02);
        }

        .section video {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .section ul, .section ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        .section li {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .section a {
            color: #667eea;
            text-decoration: none;
            border-bottom: 2px solid transparent;
            transition: border-color 0.3s ease;
        }

        .section a:hover {
            border-bottom-color: #667eea;
        }

        .section blockquote {
            border-left: 4px solid #667eea;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            background: rgba(102, 126, 234, 0.1);
            padding: 15px 20px;
            border-radius: 5px;
        }

        .section button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .section input, .section textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .section input:focus, .section textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .style-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 320px;
            z-index: 1001;
            transition: transform 0.3s ease, opacity 0.3s ease;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
        }

        .style-panel.collapsed {
            transform: translateX(-85%);
            opacity: 0.7;
        }

        .style-panel.hidden {
            display: none;
        }

        .style-panel-toggle {
            position: absolute;
            right: -35px;
            top: 10px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: background 0.3s ease;
        }

        .style-panel-toggle:hover {
            background: rgba(255, 255, 255, 1);
        }

        .style-control {
            margin-bottom: 10px;
        }

        .style-control label {
            font-weight: 600;
            color: #4a5568;
            font-size: 0.8em;
            margin-right: 8px;
            min-width: 80px;
        }

        .style-control-row {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }

        .style-control input, .style-control select {
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 0.8em;
        }

        .style-control input[type="color"] {
            width: 35px;
            height: 25px;
            padding: 0;
            border: 1px solid #ccc;
            cursor: pointer;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .style-control input[type="range"] {
            flex: 1;
            cursor: pointer;
            margin: 0;
            min-width: 0;
        }

        .style-control select {
            flex: 1;
            padding: 4px;
            min-width: 0;
        }

        .value-display {
            font-size: 0.7em;
            color: #666;
            width: 30px;
            text-align: right;
            flex-shrink: 0;
            white-space: nowrap;
        }

        .section-selector {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .section-selector select {
            width: 100%;
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            font-size: 0.9em;
            background: white;
        }

        .style-section {
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 5px;
            border-left: 3px solid #667eea;
        }

        .style-section h4 {
            font-size: 0.9em;
            color: #4a5568;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .config-editor {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 400px;
            z-index: 1000;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .config-editor.collapsed {
            transform: translateX(85%);
            opacity: 0.7;
        }

        .config-editor.hidden {
            display: none;
        }

        .config-editor-toggle {
            position: absolute;
            left: -35px;
            top: 10px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 8px 0 0 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: background 0.3s ease;
        }

        .config-editor-toggle:hover {
            background: rgba(255, 255, 255, 1);
        }

        .panel-controls {
            position: fixed;
            top: 20px;
            right: 50%;
            transform: translateX(50%);
            z-index: 1002;
            display: flex;
            gap: 10px;
        }

        .panel-control-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .panel-control-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
        }

        .panel-control-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .export-btn {
            background: linear-gradient(45deg, #48bb78, #38a169) !important;
            color: white !important;
        }

        .export-btn:hover {
            background: linear-gradient(45deg, #38a169, #2f855a) !important;
        }

        .config-editor textarea {
            width: 100%;
            height: 200px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .config-editor button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }

        .section nav, .site-header nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 20px 0;
    padding: 15px 0;
    border-top: 2px solid rgba(102, 126, 234, 0.2);
    border-bottom: 2px solid rgba(102, 126, 234, 0.2);
}

.section nav a, .site-header nav a {
    color: #667eea !important;
    text-decoration: none !important;
    padding: 8px 16px;
    border-radius: 20px;
    transition: all 0.3s ease;
    font-weight: 500;
    border-bottom: none !important;
}

.section nav a:hover, .site-header nav a:hover {
    background: linear-gradient(45deg, #667eea, #764ba2);
    color: white !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    border-bottom: none !important;
}

@media (max-width: 768px) {

    .section nav, .site-header nav {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }
    
    .section nav a, .site-header nav a {
        padding: 12px 20px;
    }
}

        @media (max-width: 768px) {

            .style-panel {
                position: relative;
                top: 0;
                left: 0;
                margin-bottom: 20px;
                max-width: 100%;
                width: 100%;
            }

            .style-panel.collapsed {
                transform: none;
                opacity: 1;
                display: none;
            }

            .style-panel-toggle {
                position: relative;
                right: 0;
                top: 0;
                width: 100%;
                border-radius: 5px;
                margin-bottom: 10px;
            }

            .config-editor {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                max-width: 100%;
            }

            .config-editor.collapsed {
                transform: none;
                opacity: 1;
                display: none;
            }

            .config-editor-toggle {
                position: relative;
                left: 0;
                top: 0;
                width: 100%;
                border-radius: 5px;
                margin-bottom: 10px;
            }

            .panel-controls {
                position: relative;
                top: 0;
                right: auto;
                transform: none;
                justify-content: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }

            .container {
                padding: 20px;
            }

            .site-header {
                margin: -20px -20px 20px -20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="panel-controls">
            <button class="panel-control-btn active" id="styleToggle" onclick="togglePanel('style')">üé® Styles</button>
            <button class="panel-control-btn active" id="configToggle" onclick="togglePanel('config')">‚öôÔ∏è Config</button>
            <button class="panel-control-btn export-btn" onclick="exportWebsite()">üíæ Export Website</button>
        </div>

        <div class="style-panel" id="stylePanel">
            <button class="style-panel-toggle" onclick="toggleStylePanel()">üé®</button>
            <h3 style="margin-bottom: 15px; font-size: 1em;">Style Controls</h3>
            
            <div class="section-selector">
                <label for="targetSelector" style="display: block; margin-bottom: 5px; font-weight: bold;">Edit Target:</label>
                <select id="targetSelector" onchange="switchTarget()">
                    <option value="global">üåç Global Styles</option>
                </select>
            </div>

            <div id="globalStyles">
                <div class="style-section">
                    <h4>Background</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="bgGradient1">Start:</label>
                            <input type="color" id="bgGradient1" value="#667eea" onchange="updateStyles()">
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="bgGradient2">End:</label>
                            <input type="color" id="bgGradient2" value="#764ba2" onchange="updateStyles()">
                        </div>
                    </div>
                </div>

                <div class="style-section">
                    <h4>Sections</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="sectionBg">Background:</label>
                            <input type="color" id="sectionBg" value="#ffffff" onchange="updateStyles()">
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="sectionOpacity">Opacity:</label>
                            <input type="range" id="sectionOpacity" min="0.5" max="1" step="0.05" value="0.95" onchange="updateStyles()">
                            <span class="value-display" id="opacityValue">95%</span>
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="borderRadius">Radius:</label>
                            <input type="range" id="borderRadius" min="0" max="30" value="15" onchange="updateStyles()">
                            <span class="value-display" id="radiusValue">15px</span>
                        </div>
                    </div>
                </div>

                <div class="style-section">
                    <h4>Typography</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="fontFamily">Font:</label>
                            <select id="fontFamily" onchange="updateStyles()">
                                <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                                <option value="Arial, sans-serif">Arial</option>
                                <option value="Georgia, serif">Georgia</option>
                                <option value="'Times New Roman', serif">Times</option>
                                <option value="'Courier New', monospace">Courier</option>
                                <option value="Helvetica, sans-serif">Helvetica</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="fontSize">Size:</label>
                            <input type="range" id="fontSize" min="12" max="24" value="16" onchange="updateStyles()">
                            <span class="value-display" id="fontSizeValue">16px</span>
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="textColor">Text:</label>
                            <input type="color" id="textColor" value="#333333" onchange="updateStyles()">
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="headingColor">Heading:</label>
                            <input type="color" id="headingColor" value="#4a5568" onchange="updateStyles()">
                        </div>
                    </div>
                </div>

                <div class="style-section">
                    <h4>Colors</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="accentColor">Accent:</label>
                            <input type="color" id="accentColor" value="#667eea" onchange="updateStyles()">
                        </div>
                    </div>
                </div>
            </div>

            <div id="sectionStyles" style="display: none;">
                <div class="style-section">
                    <h4>Section Layout</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="sectionBgCustom">Background:</label>
                            <input type="color" id="sectionBgCustom" onchange="updateSectionStyles()">
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="sectionPadding">Padding:</label>
                            <input type="range" id="sectionPadding" min="10" max="60" value="30" onchange="updateSectionStyles()">
                            <span class="value-display" id="paddingValue">30px</span>
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="sectionAlign">Align:</label>
                            <select id="sectionAlign" onchange="updateSectionStyles()">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                                <option value="justify">Justify</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="style-section">
                    <h4>Headings</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="headingColorCustom">Color:</label>
                            <input type="color" id="headingColorCustom" onchange="updateSectionStyles()">
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="headingSize">Size:</label>
                            <input type="range" id="headingSize" min="1" max="3" step="0.1" value="2" onchange="updateSectionStyles()">
                            <span class="value-display" id="headingSizeValue">2em</span>
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="headingAlign">Align:</label>
                            <select id="headingAlign" onchange="updateSectionStyles()">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="style-section">
                    <h4>Paragraphs</h4>
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="paragraphColor">Color:</label>
                            <input type="color" id="paragraphColor" onchange="updateSectionStyles()">
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="paragraphSize">Size:</label>
                            <input type="range" id="paragraphSize" min="0.8" max="1.5" step="0.1" value="1.1" onchange="updateSectionStyles()">
                            <span class="value-display" id="paragraphSizeValue">1.1em</span>
                        </div>
                    </div>
                    
                    <div class="style-control">
                        <div class="style-control-row">
                            <label for="paragraphAlign">Align:</label>
                            <select id="paragraphAlign" onchange="updateSectionStyles()">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                                <option value="justify">Justify</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="resetStyles()" style="width: 100%; margin-top: 15px; background: #e53e3e; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-size: 0.8em;">Reset Styles</button>
        </div>

        <div class="config-editor" id="configEditor">
            <button class="config-editor-toggle" onclick="toggleConfigPanel()">‚öôÔ∏è</button>
            <h3>Configuration Editor</h3>
            <textarea id="configInput" placeholder="Enter configuration here...
Example:
header
h1 = My Website
nav1 = Home, About, Services, Contact
p1 = Welcome to my amazing site

s1
h2 = About Us
p1 = This is the first section
i1 = https://via.placeholder.com/400x200

s2
h2 = Services
nav2 = Web Design, Development, SEO
p1 = What we offer"></textarea>
            <button onclick="generateSections()">Generate Sections</button>
            <button onclick="clearSections()">Clear All</button>
        </div>
        
        <div id="content">
            <!-- Dynamic sections will be generated here -->
        </div>
    </div>

    <script>
        // Store sections data and styles
        let sectionsData = {};
        let sectionStyles = {};
        let currentTarget = 'global';
        let hasHeader = false;
        
        // Style panel toggle functionality
        function toggleStylePanel() {
            const panel = document.getElementById('stylePanel');
            panel.classList.toggle('collapsed');
        }

        // Config panel toggle functionality
        function toggleConfigPanel() {
            const panel = document.getElementById('configEditor');
            panel.classList.toggle('collapsed');
        }

        // Main panel visibility toggle
        function togglePanel(type) {
            const stylePanel = document.getElementById('stylePanel');
            const configPanel = document.getElementById('configEditor');
            const styleToggle = document.getElementById('styleToggle');
            const configToggle = document.getElementById('configToggle');

            if (type === 'style') {
                const isHidden = stylePanel.classList.contains('hidden');
                if (isHidden) {
                    stylePanel.classList.remove('hidden');
                    styleToggle.classList.add('active');
                } else {
                    stylePanel.classList.add('hidden');
                    styleToggle.classList.remove('active');
                }
            } else if (type === 'config') {
                const isHidden = configPanel.classList.contains('hidden');
                if (isHidden) {
                    configPanel.classList.remove('hidden');
                    configToggle.classList.add('active');
                } else {
                    configPanel.classList.add('hidden');
                    configToggle.classList.remove('active');
                }
            }
        }

        // Switch between global and section-specific styling
        function switchTarget() {
            const selector = document.getElementById('targetSelector');
            currentTarget = selector.value;
            
            const globalStyles = document.getElementById('globalStyles');
            const sectionStyles = document.getElementById('sectionStyles');
            
            // Clear section selection
            document.querySelectorAll('.section, .site-header').forEach(section => {
                section.classList.remove('selected');
            });
            
            if (currentTarget === 'global') {
                globalStyles.style.display = 'block';
                sectionStyles.style.display = 'none';
            } else {
                globalStyles.style.display = 'none';
                sectionStyles.style.display = 'block';
                
                // Highlight selected section
                const targetSection = document.getElementById(currentTarget) || document.querySelector('.site-header');
                if (targetSection) {
                    targetSection.classList.add('selected');
                }
                
                // Load section-specific styles
                loadSectionStyles(currentTarget);
            }
        }

        // Load section-specific styles into controls
        function loadSectionStyles(sectionId) {
            const styles = sectionStyles[sectionId] || {};
            
            document.getElementById('sectionBgCustom').value = styles.backgroundColor || '#ffffff';
            document.getElementById('sectionPadding').value = styles.padding || 30;
            document.getElementById('sectionAlign').value = styles.textAlign || 'left';
            document.getElementById('headingColorCustom').value = styles.headingColor || '#4a5568';
            document.getElementById('headingSize').value = styles.headingSize || 2;
            document.getElementById('headingAlign').value = styles.headingAlign || 'left';
            document.getElementById('paragraphColor').value = styles.paragraphColor || '#333333';
            document.getElementById('paragraphSize').value = styles.paragraphSize || 1.1;
            document.getElementById('paragraphAlign').value = styles.paragraphAlign || 'left';
            
            // Update display values
            document.getElementById('paddingValue').textContent = (styles.padding || 30) + 'px';
            document.getElementById('headingSizeValue').textContent = (styles.headingSize || 2) + 'em';
            document.getElementById('paragraphSizeValue').textContent = (styles.paragraphSize || 1.1) + 'em';
        }

        // Update section-specific styles
        function updateSectionStyles() {
            if (currentTarget === 'global') return;
            
            const sectionId = currentTarget;
            if (!sectionStyles[sectionId]) {
                sectionStyles[sectionId] = {};
            }
            
            const styles = sectionStyles[sectionId];
            styles.backgroundColor = document.getElementById('sectionBgCustom').value;
            styles.padding = document.getElementById('sectionPadding').value;
            styles.textAlign = document.getElementById('sectionAlign').value;
            styles.headingColor = document.getElementById('headingColorCustom').value;
            styles.headingSize = document.getElementById('headingSize').value;
            styles.headingAlign = document.getElementById('headingAlign').value;
            styles.paragraphColor = document.getElementById('paragraphColor').value;
            styles.paragraphSize = document.getElementById('paragraphSize').value;
            styles.paragraphAlign = document.getElementById('paragraphAlign').value;
            
            // Update display values
            document.getElementById('paddingValue').textContent = styles.padding + 'px';
            document.getElementById('headingSizeValue').textContent = styles.headingSize + 'em';
            document.getElementById('paragraphSizeValue').textContent = styles.paragraphSize + 'em';
            
            updateStyles();
        }

        // Update section selector when sections change
        function updateSectionSelector() {
    const selector = document.getElementById('targetSelector');
    const currentValue = selector.value;
    
    // Clear existing options except global
    selector.innerHTML = '<option value="global">üåç Global Styles</option>';
    
    // Add header option if it exists
    if (hasHeader) {
        const option = document.createElement('option');
        option.value = 'header';
        option.textContent = 'üè† Site Header';
        selector.appendChild(option);
    }
    
    // Add section options (excluding header from sectionsData)
    Object.keys(sectionsData).forEach(sectionKey => {
        if (sectionKey !== 'header') {  // Skip header since we handle it separately
            const option = document.createElement('option');
            option.value = sectionKey;
            option.textContent = `üìÑ Section ${sectionKey.substring(1)}`;
            selector.appendChild(option);
        }
    });
    
    // Restore selection if it still exists
    if (currentValue !== 'global' && (sectionsData[currentValue] || (currentValue === 'header' && hasHeader))) {
        selector.value = currentValue;
    } else {
        selector.value = 'global';
        currentTarget = 'global';
        switchTarget();
    }
}

        // Get current styles as CSS string
        function getCurrentStyles() {
            const bgGradient1 = document.getElementById('bgGradient1').value;
            const bgGradient2 = document.getElementById('bgGradient2').value;
            const sectionBg = document.getElementById('sectionBg').value;
            const sectionOpacity = document.getElementById('sectionOpacity').value;
            const fontFamily = document.getElementById('fontFamily').value;
            const textColor = document.getElementById('textColor').value;
            const headingColor = document.getElementById('headingColor').value;
            const accentColor = document.getElementById('accentColor').value;
            const fontSize = document.getElementById('fontSize').value;
            const borderRadius = document.getElementById('borderRadius').value;

            let css = `
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: ${fontFamily};
            line-height: 1.6;
            color: ${textColor};
            background: linear-gradient(135deg, ${bgGradient1} 0%, ${bgGradient2} 100%);
            min-height: 100vh;
            font-size: ${fontSize}px;
        }

        .container {
            margin: 0 auto;
            padding: 80px 20px 20px 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.98);
            margin: 0px -20px 40px -20px;
            padding: 30px 20px;
            border-radius: 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        header h1 {
            color: ${headingColor};
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2});
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        header p {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .section {
            background: ${hexToRgba(sectionBg, sectionOpacity)};
            max-width: 1200px;
            margin: 20px auto;
            padding: 30px;
            border-radius: ${borderRadius}px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .section h1 {
            color: ${headingColor};
            font-size: 2.5em;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2});
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section h2 {
            color: ${headingColor};
            font-size: 2em;
            margin-bottom: 15px;
            border-bottom: 3px solid ${accentColor};
            padding-bottom: 10px;
        }

        .section h3 {
            color: ${headingColor};
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .section p {
            margin-bottom: 15px;
            font-size: 1.1em;
            text-align: justify;
        }

        .section img {
            max-width: 100%;
            height: auto;
            border-radius: ${Math.max(0, borderRadius - 5)}px;
            margin: 15px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .section img:hover {
            transform: scale(1.02);
        }

        .section video {
            max-width: 100%;
            height: auto;
            border-radius: ${Math.max(0, borderRadius - 5)}px;
            margin: 15px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .section ul, .section ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        .section li {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .section a {
            color: ${accentColor};
            text-decoration: none;
            border-bottom: 2px solid transparent;
            transition: border-color 0.3s ease;
        }

        .section a:hover {
            border-bottom-color: ${accentColor};
        }

        .section blockquote {
            border-left: 4px solid ${accentColor};
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            background: ${hexToRgba(accentColor, 0.1)};
            padding: 15px 20px;
            border-radius: 5px;
        }

        .section button {
            background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2});
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .section input, .section textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .section input:focus, .section textarea:focus {
            outline: none;
            border-color: ${accentColor};
        }

        /* Navigation Styles */
        .section nav, header nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            padding: 15px 0;
            border-top: 2px solid rgba(102, 126, 234, 0.2);
            border-bottom: 2px solid rgba(102, 126, 234, 0.2);
        }

        .section nav a, header nav a {
            color: ${accentColor} !important;
            text-decoration: none !important;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
            border-bottom: none !important;
        }

        .section nav a:hover, header nav a:hover {
            background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2});
            color: white !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            border-bottom: none !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            header {
                margin: -20px -20px 20px -20px;
            }
            
            header h1 {
                font-size: 2.5em;
            }
            
            .section h1 {
                font-size: 2em;
            }
            
            .section h2 {
                font-size: 1.5em;
            }

            .section nav, header nav {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .section nav a, header nav a {
                padding: 12px 20px;
            }
        }
            `;

            // Add section-specific styles
            Object.keys(sectionStyles).forEach(sectionId => {
                const styles = sectionStyles[sectionId];
                const selector = sectionId === 'header' ? 'header' : `#${sectionId}`;
                css += `
        ${selector} {
            background: ${styles.backgroundColor} !important;
            padding: ${styles.padding}px !important;
            text-align: ${styles.textAlign} !important;
        }
        
        ${selector} h1, ${selector} h2, ${selector} h3 {
            color: ${styles.headingColor} !important;
            text-align: ${styles.headingAlign} !important;
        }
        
        ${selector} h2 {
            font-size: ${styles.headingSize}em !important;
        }
        
        ${selector} p {
            color: ${styles.paragraphColor} !important;
            font-size: ${styles.paragraphSize}em !important;
            text-align: ${styles.paragraphAlign} !important;
        }
                `;
            });

            return css;
        }

        // Export website functionality
        function exportWebsite() {
            const contentDiv = document.getElementById('content');
            const contentHTML = contentDiv.innerHTML;
            
            if (!contentHTML.trim()) {
                alert('No content to export! Please generate some sections first.');
                return;
            }

            // Create a temporary div to process the content
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = contentHTML;
            
            // Remove section labels from export
            tempDiv.querySelectorAll('.section-label').forEach(label => label.remove());
            
            // Find all buttons and add onclick attributes
            const buttons = tempDiv.querySelectorAll('button');
            buttons.forEach((button, index) => {
                // Find the corresponding button in the original content
                const originalButtons = contentDiv.querySelectorAll('button');
                const originalButton = originalButtons[index];
                
                if (originalButton && originalButton.onclick) {
                    // Get the function string and extract the body
                    const funcStr = originalButton.onclick.toString();
                    const funcBody = funcStr.substring(funcStr.indexOf('{') + 1, funcStr.lastIndexOf('}'));
                    button.setAttribute('onclick', funcBody.trim());
                }
            });

            const styles = getCurrentStyles();
            const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
            
            const exportHTML = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Generated Website</title>
    <style>${styles}</style>
</head>
<body>
    <div class="container">
        ${tempDiv.innerHTML}
    </div>
</body>
</html>`;

            // Create and download the file
            const blob = new Blob([exportHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `my-website-${timestamp}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // Show success message
            const originalText = event.target.textContent;
            event.target.textContent = '‚úÖ Downloaded!';
            event.target.style.background = 'linear-gradient(45deg, #48bb78, #38a169)';
            
            setTimeout(() => {
                event.target.textContent = originalText;
                event.target.style.background = '';
            }, 2000);
        }

        // Update styles based on control values
        function updateStyles() {
            const bgGradient1 = document.getElementById('bgGradient1').value;
            const bgGradient2 = document.getElementById('bgGradient2').value;
            const sectionBg = document.getElementById('sectionBg').value;
            const sectionOpacity = document.getElementById('sectionOpacity').value;
            const fontFamily = document.getElementById('fontFamily').value;
            const textColor = document.getElementById('textColor').value;
            const headingColor = document.getElementById('headingColor').value;
            const accentColor = document.getElementById('accentColor').value;
            const fontSize = document.getElementById('fontSize').value;
            const borderRadius = document.getElementById('borderRadius').value;

            // Update display values
            document.getElementById('opacityValue').textContent = Math.round(sectionOpacity * 100) + '%';
            document.getElementById('fontSizeValue').textContent = fontSize + 'px';
            document.getElementById('radiusValue').textContent = borderRadius + 'px';

            // Create dynamic styles
            let dynamicStyles = `
                body {
                    background: linear-gradient(135deg, ${bgGradient1} 0%, ${bgGradient2} 100%) !important;
                    font-family: ${fontFamily} !important;
                    color: ${textColor} !important;
                    font-size: ${fontSize}px !important;
                }
                
                .section {
                    background: ${hexToRgba(sectionBg, sectionOpacity)} !important;
                    border-radius: ${borderRadius}px !important;
                }
                
                .section h1, .section h2, .section h3 {
                    color: ${headingColor} !important;
                }
                
                .section h1 {
                    background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                    -webkit-background-clip: text !important;
                    -webkit-text-fill-color: transparent !important;
                    background-clip: text !important;
                }
                
                .section h2 {
                    border-bottom-color: ${accentColor} !important;
                }
                
                .section a {
                    color: ${accentColor} !important;
                }
                
                .section a:hover {
                    border-bottom-color: ${accentColor} !important;
                }
                
                .section button {
                    background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                }
                
                .section input:focus, .section textarea:focus {
                    border-color: ${accentColor} !important;
                }
                
                .section blockquote {
                    border-left-color: ${accentColor} !important;
                    background: ${hexToRgba(accentColor, 0.1)} !important;
                }
                
                .section img, .section video {
                    border-radius: ${Math.max(0, borderRadius - 5)}px !important;
                }
                
                .config-editor, .style-panel {
                    background: ${hexToRgba(sectionBg, sectionOpacity)} !important;
                    border-radius: ${borderRadius}px !important;
                }
                
                .style-panel-toggle {
                    background: ${hexToRgba(sectionBg, 0.9)} !important;
                }
                
                .site-header h1 {
                    background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                    -webkit-background-clip: text !important;
                    -webkit-text-fill-color: transparent !important;
                    background-clip: text !important;
                }

                /* Navigation Styles */
                .section nav a, .site-header nav a {
                    color: ${accentColor} !important;
                }

                .section nav a:hover, .site-header nav a:hover {
                    background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                }
            `;

            // Add section-specific styles
            Object.keys(sectionStyles).forEach(sectionId => {
                const styles = sectionStyles[sectionId];
                const selector = sectionId === 'header' ? '.site-header' : `#${sectionId}`;
                dynamicStyles += `
                ${selector} {
                    background: ${styles.backgroundColor} !important;
                    padding: ${styles.padding}px !important;
                    text-align: ${styles.textAlign} !important;
                }
                
                ${selector} h1, ${selector} h2, ${selector} h3 {
                    color: ${styles.headingColor} !important;
                    text-align: ${styles.headingAlign} !important;
                }
                
                ${selector} h2 {
                    font-size: ${styles.headingSize}em !important;
                }
                
                ${selector} p {
                    color: ${styles.paragraphColor} !important;
                    font-size: ${styles.paragraphSize}em !important;
                    text-align: ${styles.paragraphAlign} !important;
                }
                `;
            });

            // Apply dynamic styles
            let styleElement = document.getElementById('dynamicStyles');
            if (!styleElement) {
                styleElement = document.createElement('style');
                styleElement.id = 'dynamicStyles';
                document.head.appendChild(styleElement);
            }
            styleElement.textContent = dynamicStyles;
        }

        // Convert hex color to rgba
        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        // Reset styles to default
        function resetStyles() {
            if (currentTarget === 'global') {
                document.getElementById('bgGradient1').value = '#667eea';
                document.getElementById('bgGradient2').value = '#764ba2';
                document.getElementById('sectionBg').value = '#ffffff';
                document.getElementById('sectionOpacity').value = '0.95';
                document.getElementById('fontFamily').value = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
                document.getElementById('textColor').value = '#333333';
                document.getElementById('headingColor').value = '#4a5568';
                document.getElementById('accentColor').value = '#667eea';
                document.getElementById('fontSize').value = '16';
                document.getElementById('borderRadius').value = '15';
            } else {
                // Reset section-specific styles
                delete sectionStyles[currentTarget];
                loadSectionStyles(currentTarget);
            }
            updateStyles();
        }

        // Default configuration for demonstration
        const defaultConfig = `header
h1 = My Website
p1 = Welcome to my website
nav1 = Home, About, Services, Contact, Blog
p2 = Built with the Dynamic Template Builder

s1
h1 = Welcome to Dynamic Template
p1 = This is a dynamic website template that generates content based on configuration. You can add headings, paragraphs, images, videos, and more by editing the configuration.
i1 = https://via.placeholder.com/600x300/667eea/ffffff?text=Dynamic+Image
p2 = Try editing the configuration in the panel to see the magic happen!

s2
h2 = Features
p1 = This template supports various content types:
ul1 = Headings (h1, h2, h3)
ul2 = Paragraphs (p)
ul3 = Images (i)
ul4 = Videos (v)
ul5 = Lists (ul, ol)
ul6 = Links (a)
ul7 = Buttons (btn)
ul8 = Navigation bars (nav)

s3
h2 = How to Use
p1 = The syntax is simple: just type the section number (s1, s2, etc.) and then list your elements below
p2 = For example: nav1 = Home, About, Contact creates a navigation bar
nav2 = Products, Support, Login
btn1 = Click Me!|onclick:alert('Button clicked!')

s4
h2 = Section-Specific Styling
p1 = You can now style individual sections! Use the dropdown in the style panel to switch between global styles and section-specific customization.
p2 = Each section can have its own colors, alignment, padding, and typography settings.`;

        // Load default configuration on page load
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('configInput').value = defaultConfig;
            generateSections();
        });

        function parseConfiguration(config) {
            const lines = config.split('\n').filter(line => line.trim() !== '');
            sectionsData = {};
            hasHeader = false;
            let currentSection = null;

            lines.forEach(line => {
                line = line.trim();
                
                // Check if this is a header section
                if (line === 'header') {
                    currentSection = 'header';
                    hasHeader = true;
                    if (!sectionsData[currentSection]) {
                        sectionsData[currentSection] = {};
                    }
                    return;
                }
                
                // Check if this is a section header (e.g., "s1", "s2", etc.)
                const sectionMatch = line.match(/^s(\d+)$/);
                if (sectionMatch) {
                    currentSection = `s${sectionMatch[1]}`;
                    if (!sectionsData[currentSection]) {
                        sectionsData[currentSection] = {};
                    }
                    return;
                }
                
                // Check if this is an element line (e.g., "h1 = Welcome", "p1 = Text", etc.)
                const elementMatch = line.match(/^([a-z]+)(\d+)\s*=\s*(.*)$/);
                if (elementMatch && currentSection) {
                    const [, elementType, elementNum, content] = elementMatch;
                    sectionsData[currentSection][`${elementType}${elementNum}`] = content.trim();
                }
            });
        }

        function createElement(type, content, elementNum) {
            let element;
            
            switch (type) {
                case 'h1':
                case 'h2':
                case 'h3':
                    element = document.createElement(type);
                    element.textContent = content;
                    break;
                    
                case 'p':
                    element = document.createElement('p');
                    element.textContent = content;
                    break;
                    
                case 'i':
                    element = document.createElement('img');
                    element.src = content;
                    element.alt = `Image ${elementNum}`;
                    element.loading = 'lazy';
                    break;
                    
                case 'v':
                    element = document.createElement('video');
                    element.src = content;
                    element.controls = true;
                    element.preload = 'metadata';
                    break;
                    
                case 'ul':
                case 'ol':
                    // For lists, we'll create individual list items
                    element = document.createElement('li');
                    element.textContent = content;
                    break;
                    
                case 'a':
                    element = document.createElement('a');
                    const linkParts = content.split('|');
                    element.href = linkParts[1] || linkParts[0];
                    element.textContent = linkParts[0];
                    if (linkParts[1] && linkParts[1].startsWith('http')) {
                        element.target = '_blank';
                    }
                    break;
                    
                case 'btn':
                    element = document.createElement('button');
                    const btnParts = content.split('|');
                    element.textContent = btnParts[0];
                    if (btnParts[1] && btnParts[1].startsWith('onclick:')) {
                        element.onclick = new Function(btnParts[1].replace('onclick:', ''));
                    }
                    break;
                    
                case 'nav':
                    element = document.createElement('nav');
                    const navItems = content.split(',').map(item => item.trim());
                    navItems.forEach(item => {
                        const link = document.createElement('a');
                        link.textContent = item;
                        // Create a simple anchor from the item name
                        link.href = '#' + item.toLowerCase().replace(/\s+/g, '-');
                        element.appendChild(link);
                    });
                    break;
                    
                case 'q':
                    element = document.createElement('blockquote');
                    element.textContent = content;
                    break;
                    
                default:
                    element = document.createElement('div');
                    element.textContent = content;
                    break;
            }
            
            return element;
        }

        function generateSections() {
            const config = document.getElementById('configInput').value;
            parseConfiguration(config);
            
            const contentDiv = document.getElementById('content');
            contentDiv.innerHTML = '';
            
            // Generate header if it exists
            if (hasHeader && sectionsData.header) {
                const headerDiv = document.createElement('header');
                headerDiv.className = 'site-header';
                
                // Add section label
                const label = document.createElement('div');
                label.className = 'section-label';
                label.textContent = 'Site Header';
                headerDiv.appendChild(label);
                
                const headerData = sectionsData.header;
                
                // Group list items
                const listGroups = {};
                const otherElements = {};
                
                Object.keys(headerData).forEach(elementKey => {
                    const match = elementKey.match(/^(ul|ol)(\d+)$/);
                    if (match) {
                        const [, listType, ] = match;
                        if (!listGroups[listType]) {
                            listGroups[listType] = [];
                        }
                        listGroups[listType].push(headerData[elementKey]);
                    } else {
                        otherElements[elementKey] = headerData[elementKey];
                    }
                });
                
                // Sort elements by their number
                const sortedElements = Object.keys(otherElements).sort((a, b) => {
                    const aNum = parseInt(a.match(/\d+$/)[0]);
                    const bNum = parseInt(b.match(/\d+$/)[0]);
                    return aNum - bNum;
                });
                
                // Add non-list elements
                sortedElements.forEach(elementKey => {
                    const elementType = elementKey.replace(/\d+$/, '');
                    const elementNum = elementKey.match(/\d+$/)[0];
                    const content = otherElements[elementKey];
                    
                    const element = createElement(elementType, content, elementNum);
                    headerDiv.appendChild(element);
                });
                
                // Add lists
                Object.keys(listGroups).forEach(listType => {
                    const listElement = document.createElement(listType);
                    listGroups[listType].forEach(itemContent => {
                        const listItem = document.createElement('li');
                        listItem.textContent = itemContent;
                        listElement.appendChild(listItem);
                    });
                    headerDiv.appendChild(listElement);
                });
                
                contentDiv.appendChild(headerDiv);
            }
            
            // Sort sections by number (excluding header)
            const sortedSections = Object.keys(sectionsData)
                .filter(key => key !== 'header')
                .sort((a, b) => {
                    return parseInt(a.substring(1)) - parseInt(b.substring(1));
                });
            
            sortedSections.forEach(sectionKey => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section';
                sectionDiv.id = sectionKey;
                
                // Add section label
                const label = document.createElement('div');
                label.className = 'section-label';
                label.textContent = `Section ${sectionKey.substring(1)}`;
                sectionDiv.appendChild(label);
                
                const sectionData = sectionsData[sectionKey];
                
                // Group list items
                const listGroups = {};
                const otherElements = {};
                
                Object.keys(sectionData).forEach(elementKey => {
                    const match = elementKey.match(/^(ul|ol)(\d+)$/);
                    if (match) {
                        const [, listType, ] = match;
                        if (!listGroups[listType]) {
                            listGroups[listType] = [];
                        }
                        listGroups[listType].push(sectionData[elementKey]);
                    } else {
                        otherElements[elementKey] = sectionData[elementKey];
                    }
                });
                
                // Sort elements by their number
                const sortedElements = Object.keys(otherElements).sort((a, b) => {
                    const aNum = parseInt(a.match(/\d+$/)[0]);
                    const bNum = parseInt(b.match(/\d+$/)[0]);
                    return aNum - bNum;
                });
                
                // Add non-list elements
                sortedElements.forEach(elementKey => {
                    const elementType = elementKey.replace(/\d+$/, '');
                    const elementNum = elementKey.match(/\d+$/)[0];
                    const content = otherElements[elementKey];
                    
                    const element = createElement(elementType, content, elementNum);
                    sectionDiv.appendChild(element);
                });
                
                // Add lists
                Object.keys(listGroups).forEach(listType => {
                    const listElement = document.createElement(listType);
                    listGroups[listType].forEach(itemContent => {
                        const listItem = document.createElement('li');
                        listItem.textContent = itemContent;
                        listElement.appendChild(listItem);
                    });
                    sectionDiv.appendChild(listElement);
                });
                
                contentDiv.appendChild(sectionDiv);
            });
            
            // Update section selector
            updateSectionSelector();
            updateStyles();
        }

        function clearSections() {
            document.getElementById('configInput').value = '';
            document.getElementById('content').innerHTML = '';
            sectionsData = {};
            sectionStyles = {};
            hasHeader = false;
            updateSectionSelector();
        }
    </script>
</body>
</html>
