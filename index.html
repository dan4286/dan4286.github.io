<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Website Generator with Advanced Styling</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            margin: 0 auto;
            padding: 80px 20px 20px 20px;
            max-width: 1200px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            margin: -60px -20px 40px -20px;
            padding: 40px 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
            position: relative;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            margin: 30px 0;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
            position: relative;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        /* Selectable elements */
        .selectable {
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .selectable:hover {
            background: rgba(102, 126, 234, 0.1) !important;
            border-radius: 5px;
        }

        .selectable.selected {
            background: rgba(102, 126, 234, 0.2) !important;
            border-radius: 5px;
            box-shadow: 0 0 0 2px #667eea !important;
        }

        .element-label {
            position: absolute;
            top: -8px;
            left: 0;
            background: #667eea;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.7em;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 10;
        }

        .selectable:hover .element-label,
        .selectable.selected .element-label {
            opacity: 1;
        }

        /* Column Layout System */
        .columns {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }

        .column {
            flex: 1;
            min-width: 0;
        }

        @media (max-width: 768px) {
            .columns {
                flex-direction: column;
                gap: 20px;
            }
        }

        /* Typography */
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #4a5568;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            font-size: 2em;
            margin-bottom: 15px;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: #4a5568;
        }

        p {
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.7;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
            transition: transform 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            padding: 20px 0;
            border-top: 2px solid rgba(102, 126, 234, 0.2);
            border-bottom: 2px solid rgba(102, 126, 234, 0.2);
        }

        nav a {
            color: #667eea;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        nav a:hover {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
        }

        /* Control Panels */
        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
        }

        .control-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            z-index: 999;
            display: none;
        }

        .panel.show {
            display: block;
        }

        .panel h3 {
            margin-bottom: 15px;
            color: #4a5568;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }

        .style-group {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .style-group h4 {
            margin-bottom: 10px;
            color: #2d3748;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .style-control {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        .style-control label {
            min-width: 80px;
            font-size: 0.85em;
            color: #4a5568;
            font-weight: 500;
        }

        .style-control input,
        .style-control select {
            flex: 1;
            padding: 5px 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.85em;
        }

        .style-control input[type="color"] {
            width: 40px;
            height: 30px;
            padding: 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }

        .style-control input[type="range"] {
            flex: 1;
        }

        .range-value {
            min-width: 40px;
            font-size: 0.8em;
            color: #666;
            text-align: right;
        }

        .config-panel textarea {
            width: 100%;
            height: 300px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .config-panel button {
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .element-info {
            background: rgba(102, 126, 234, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .element-info strong {
            color: #667eea;
        }

        @media (max-width: 768px) {
            .controls {
                position: relative;
                top: 0;
                right: 0;
                justify-content: center;
                margin-bottom: 20px;
            }

            .panel {
                position: relative;
                top: 0;
                right: 0;
                width: 100%;
                max-height: none;
                margin-bottom: 20px;
            }

            nav {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="controls">
            <button class="control-btn" onclick="togglePanel('style')" id="styleBtn">üé® Styles</button>
            <button class="control-btn" onclick="togglePanel('config')" id="configBtn">‚öôÔ∏è Config</button>
            <button class="control-btn" onclick="exportWebsite()">üíæ Export</button>
        </div>

        <!-- Style Panel -->
        <div class="panel" id="stylePanel">
            <h3>Style Editor</h3>
            <div id="elementInfo" class="element-info" style="display: none;">
                <strong>Selected:</strong> <span id="selectedElementType"></span>
                <br><span id="selectedElementPath"></span>
            </div>

            <div id="globalStyles">
                <div class="style-group">
                    <h4>Background</h4>
                    <div class="style-control">
                        <label>Gradient Start:</label>
                        <input type="color" id="bgGradient1" value="#667eea" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>Gradient End:</label>
                        <input type="color" id="bgGradient2" value="#764ba2" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>Direction:</label>
                        <select id="bgDirection" onchange="updateStyles()">
                            <option value="135deg">Diagonal ‚Üò</option>
                            <option value="90deg">Vertical ‚Üì</option>
                            <option value="0deg">Horizontal ‚Üí</option>
                            <option value="45deg">Diagonal ‚Üó</option>
                            <option value="180deg">Horizontal ‚Üê</option>
                            <option value="270deg">Vertical ‚Üë</option>
                        </select>
                    </div>
                </div>

                <div class="style-group">
                    <h4>Typography</h4>
                    <div class="style-control">
                        <label>Font Family:</label>
                        <select id="fontFamily" onchange="updateStyles()">
                            <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="'Times New Roman', serif">Times</option>
                            <option value="'Courier New', monospace">Courier</option>
                            <option value="'Helvetica Neue', sans-serif">Helvetica</option>
                            <option value="'Roboto', sans-serif">Roboto</option>
                        </select>
                    </div>
                    <div class="style-control">
                        <label>Base Size:</label>
                        <input type="range" id="baseFontSize" min="12" max="24" value="16" onchange="updateStyles()">
                        <span class="range-value" id="baseFontSizeValue">16px</span>
                    </div>
                    <div class="style-control">
                        <label>Text Color:</label>
                        <input type="color" id="globalTextColor" value="#333333" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>Line Height:</label>
                        <input type="range" id="globalLineHeight" min="1" max="2.5" step="0.1" value="1.6" onchange="updateStyles()">
                        <span class="range-value" id="globalLineHeightValue">1.6</span>
                    </div>
                </div>

                <div class="style-group">
                    <h4>Headings</h4>
                    <div class="style-control">
                        <label>H1 Color:</label>
                        <input type="color" id="h1Color" value="#4a5568" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>H2 Color:</label>
                        <input type="color" id="h2Color" value="#2d3748" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>H3 Color:</label>
                        <input type="color" id="h3Color" value="#4a5568" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>Heading Weight:</label>
                        <select id="headingWeight" onchange="updateStyles()">
                            <option value="normal">Normal</option>
                            <option value="bold">Bold</option>
                            <option value="300">Light</option>
                            <option value="500">Medium</option>
                            <option value="700">Bold</option>
                            <option value="900">Black</option>
                        </select>
                    </div>
                </div>

                <div class="style-group">
                    <h4>Sections</h4>
                    <div class="style-control">
                        <label>Background:</label>
                        <input type="color" id="sectionBg" value="#ffffff" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>Opacity:</label>
                        <input type="range" id="sectionOpacity" min="0.5" max="1" step="0.05" value="0.95" onchange="updateStyles()">
                        <span class="range-value" id="sectionOpacityValue">95%</span>
                    </div>
                    <div class="style-control">
                        <label>Border Radius:</label>
                        <input type="range" id="sectionRadius" min="0" max="30" value="15" onchange="updateStyles()">
                        <span class="range-value" id="sectionRadiusValue">15px</span>
                    </div>
                    <div class="style-control">
                        <label>Shadow:</label>
                        <input type="range" id="sectionShadow" min="0" max="50" value="8" onchange="updateStyles()">
                        <span class="range-value" id="sectionShadowValue">8px</span>
                    </div>
                    <div class="style-control">
                        <label>Spacing:</label>
                        <input type="range" id="sectionSpacing" min="10" max="80" value="40" onchange="updateStyles()">
                        <span class="range-value" id="sectionSpacingValue">40px</span>
                    </div>
                </div>

                <div class="style-group">
                    <h4>Links & Buttons</h4>
                    <div class="style-control">
                        <label>Link Color:</label>
                        <input type="color" id="linkColor" value="#667eea" onchange="updateStyles()">
                    </div>
                    <div class="style-control">
                        <label>Button Style:</label>
                        <select id="buttonStyle" onchange="updateStyles()">
                            <option value="gradient">Gradient</option>
                            <option value="solid">Solid</option>
                            <option value="outline">Outline</option>
                            <option value="minimal">Minimal</option>
                        </select>
                    </div>
                    <div class="style-control">
                        <label>Button Radius:</label>
                        <input type="range" id="buttonRadius" min="0" max="50" value="25" onchange="updateStyles()">
                        <span class="range-value" id="buttonRadiusValue">25px</span>
                    </div>
                </div>
            </div>

            <div id="elementStyles" style="display: none;">
                <!-- Dynamic content based on element type -->
            </div>

            <button onclick="resetStyles()" style="width: 100%; margin-top: 15px; background: #e53e3e; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">Reset All Styles</button>
        </div>

        <!-- Config Panel -->
        <div class="panel config-panel" id="configPanel">
            <h3>Website Configuration</h3>
            <textarea id="configInput" placeholder="Enter your website configuration here...

SIMPLE SYNTAX:
- Use [header] for site header
- Use [section] for new sections
- Use [cols:2] for 2 columns, [cols:3] for 3 columns, etc.
- Use [col1], [col2], etc. to assign content to columns
- Use h1:, h2:, h3: for headings
- Use p: for paragraphs
- Use img: for images
- Use list: for bullet lists (separate items with |)
- Use nav: for navigation (separate links with |)
- Use btn: for buttons

EXAMPLE:
[header]
h1: My Amazing Website
p: Welcome to my site
nav: Home|About|Contact

[section]
h2: About Us
p: We are a great company

[section]
[cols:2]
[col1]
h3: Left Column
p: This is the left side
[col2]
h3: Right Column
img: https://via.placeholder.com/300x200"></textarea>
            <button onclick="generateWebsite()">Generate Website</button>
            <button onclick="clearWebsite()">Clear All</button>
            <button onclick="loadExample()">Load Example</button>
        </div>
        
        <div id="content">
            <!-- Generated content will appear here -->
        </div>
    </div>

    <script>
        let currentPanel = null;
        let selectedElement = null;
        let elementStyles = new Map();
        let elementCounter = 0;

        // Element type specific styling options
        const elementStyleOptions = {
            'Heading 1': ['text', 'spacing', 'effects', 'transform'],
            'Heading 2': ['text', 'spacing', 'effects', 'transform'],
            'Heading 3': ['text', 'spacing', 'effects', 'transform'],
            'Paragraph': ['text', 'spacing', 'background'],
            'Image': ['dimensions', 'spacing', 'effects', 'transform'],
            'List': ['text', 'spacing', 'background'],
            'Navigation': ['text', 'spacing', 'background', 'layout'],
            'Button': ['text', 'spacing', 'background', 'effects', 'transform'],
            'Header Section': ['spacing', 'background', 'layout'],
            'Section': ['spacing', 'background', 'layout'],
            'Column': ['spacing', 'background', 'layout']
        };

        function togglePanel(panelType) {
            const stylePanel = document.getElementById('stylePanel');
            const configPanel = document.getElementById('configPanel');
            const styleBtn = document.getElementById('styleBtn');
            const configBtn = document.getElementById('configBtn');

            // Hide all panels first
            stylePanel.classList.remove('show');
            configPanel.classList.remove('show');
            styleBtn.classList.remove('active');
            configBtn.classList.remove('active');

            // Show requested panel if it's not currently active
            if (currentPanel !== panelType) {
                if (panelType === 'style') {
                    stylePanel.classList.add('show');
                    styleBtn.classList.add('active');
                } else if (panelType === 'config') {
                    configPanel.classList.add('show');
                    configBtn.classList.add('active');
                }
                currentPanel = panelType;
            } else {
                currentPanel = null;
            }
        }

        function generateWebsite() {
            const config = document.getElementById('configInput').value;
            const content = document.getElementById('content');
            content.innerHTML = '';
            elementCounter = 0; // Reset counter
            elementStyles.clear();
            selectedElement = null;
            updateStylePanel();

            if (!config.trim()) {
                alert('Please enter some configuration first!');
                return;
            }

            parseAndGenerate(config, content);
        }

        function parseAndGenerate(config, container) {
            const lines = config.split('\n').map(line => line.trim()).filter(line => line);
            let currentSection = null;
            let currentColumns = null;
            let currentColumn = null;
            let columnCount = 0;

            lines.forEach(line => {
                // Check for section markers
                if (line === '[header]') {
                    elementCounter++; // Increment first
                    currentSection = document.createElement('div');
                    currentSection.className = 'header selectable';
                    const elementId = `header-${elementCounter}`;
                    currentSection.dataset.elementId = elementId;
                    currentSection.dataset.elementType = 'Header Section';
                    
                    // Use a closure to capture the current element
                    currentSection.addEventListener('click', function(e) {
                        selectElement(e, this);
                    });
                    
                    const label = document.createElement('div');
                    label.className = 'element-label';
                    label.textContent = 'Header';
                    currentSection.appendChild(label);
                    
                    container.appendChild(currentSection);
                    currentColumns = null;
                    currentColumn = null;
                    return;
                }

                if (line === '[section]') {
                    elementCounter++; // Increment first
                    currentSection = document.createElement('div');
                    currentSection.className = 'section selectable';
                    const elementId = `section-${elementCounter}`;
                    currentSection.dataset.elementId = elementId;
                    currentSection.dataset.elementType = 'Section';
                    
                    // Use a closure to capture the current element
                    currentSection.addEventListener('click', function(e) {
                        selectElement(e, this);
                    });
                    
                    const label = document.createElement('div');
                    label.className = 'element-label';
                    label.textContent = `Section ${elementCounter}`;
                    currentSection.appendChild(label);
                    
                    container.appendChild(currentSection);
                    currentColumns = null;
                    currentColumn = null;
                    return;
                }

                // Check for column setup
                const colsMatch = line.match(/^\[cols:(\d+)\]$/);
                if (colsMatch && currentSection) {
                    columnCount = parseInt(colsMatch[1]);
                    currentColumns = document.createElement('div');
                    currentColumns.className = 'columns';
                    currentSection.appendChild(currentColumns);
                    currentColumn = null;
                    return;
                }

                // Check for column assignment
                const colMatch = line.match(/^\[col(\d+)\]$/);
                if (colMatch && currentColumns) {
                    const colNum = parseInt(colMatch[1]);
                    elementCounter++; // Increment first
                    currentColumn = document.createElement('div');
                    currentColumn.className = 'column selectable';
                    const elementId = `column-${elementCounter}`;
                    currentColumn.dataset.elementId = elementId;
                    currentColumn.dataset.elementType = `Column`;
                    
                    // Use a closure to capture the current element
                    currentColumn.addEventListener('click', function(e) {
                        selectElement(e, this);
                    });
                    
                    const label = document.createElement('div');
                    label.className = 'element-label';
                    label.textContent = `Col ${colNum}`;
                    currentColumn.appendChild(label);
                    
                    if (columnCount) {
                        currentColumn.style.flex = '1';
                    }
                    
                    currentColumns.appendChild(currentColumn);
                    return;
                }

                // Parse content
                if (currentSection) {
                    const targetContainer = currentColumn || currentSection;
                    parseContentLine(line, targetContainer);
                }
            });
        }

        function parseContentLine(line, container) {
            let element = null;
            let elementType = '';

            // Headings
            if (line.startsWith('h1:')) {
                element = document.createElement('h1');
                element.textContent = line.substring(3).trim();
                elementType = 'Heading 1';
            } else if (line.startsWith('h2:')) {
                element = document.createElement('h2');
                element.textContent = line.substring(3).trim();
                elementType = 'Heading 2';
            } else if (line.startsWith('h3:')) {
                element = document.createElement('h3');
                element.textContent = line.substring(3).trim();
                elementType = 'Heading 3';
            }
            // Paragraphs
            else if (line.startsWith('p:')) {
                element = document.createElement('p');
                element.textContent = line.substring(2).trim();
                elementType = 'Paragraph';
            }
            // Images
            else if (line.startsWith('img:')) {
                element = document.createElement('img');
                element.src = line.substring(4).trim();
                element.alt = 'Generated image';
                elementType = 'Image';
            }
            // Lists
            else if (line.startsWith('list:')) {
                element = document.createElement('ul');
                const items = line.substring(5).trim().split('|');
                items.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item.trim();
                    element.appendChild(li);
                });
                elementType = 'List';
            }
            // Navigation
            else if (line.startsWith('nav:')) {
                element = document.createElement('nav');
                const links = line.substring(4).trim().split('|');
                links.forEach(link => {
                    const a = document.createElement('a');
                    a.textContent = link.trim();
                    a.href = '#' + link.trim().toLowerCase().replace(/\s+/g, '-');
                    element.appendChild(a);
                });
                elementType = 'Navigation';
            }
            // Buttons
            else if (line.startsWith('btn:')) {
                element = document.createElement('button');
                const btnText = line.substring(4).trim();
                element.textContent = btnText;
                element.onclick = () => alert(`${btnText} clicked!`);
                elementType = 'Button';
            }

            if (element) {
                elementCounter++; // Increment first
                element.classList.add('selectable');
                const elementId = `element-${elementCounter}`;
                element.dataset.elementId = elementId;
                element.dataset.elementType = elementType;
                
                // Use a closure to capture the current element
                element.addEventListener('click', function(e) {
                    selectElement(e, this);
                });
                
                const label = document.createElement('div');
                label.className = 'element-label';
                label.textContent = elementType;
                element.appendChild(label);
                
                container.appendChild(element);
            }
        }

        function selectElement(e, element) {
            e.stopPropagation();
            
            // Remove previous selection
            if (selectedElement) {
                selectedElement.classList.remove('selected');
            }
            
            // Select new element
            selectedElement = element;
            element.classList.add('selected');
            
            // Update style panel
            updateStylePanel();
            
            // Show style panel if not visible
            if (currentPanel !== 'style') {
                togglePanel('style');
            }
        }

        function updateStylePanel() {
            const elementInfo = document.getElementById('elementInfo');
            const globalStyles = document.getElementById('globalStyles');
            const elementStylesDiv = document.getElementById('elementStyles');
            
            if (selectedElement) {
                elementInfo.style.display = 'block';
                globalStyles.style.display = 'none';
                elementStylesDiv.style.display = 'block';
                
                document.getElementById('selectedElementType').textContent = selectedElement.dataset.elementType;
                document.getElementById('selectedElementPath').textContent = `ID: ${selectedElement.dataset.elementId}`;
                
                generateElementStyleControls();
                loadElementStyles();
            } else {
                elementInfo.style.display = 'none';
                globalStyles.style.display = 'block';
                elementStylesDiv.style.display = 'none';
            }
        }

        function generateElementStyleControls() {
            if (!selectedElement) return;
            
            const elementType = selectedElement.dataset.elementType;
            const allowedOptions = elementStyleOptions[elementType] || [];
            const elementStylesDiv = document.getElementById('elementStyles');
            
            let html = '';
            
            // Text styling (for text elements)
            if (allowedOptions.includes('text')) {
                html += `
            <div class="style-group">
                <h4>Text</h4>
                <div class="style-control">
                    <label>Color:</label>
                    <input type="color" id="elementColor" oninput="updateSingleStyle(this)">
                </div>
                <div class="style-control">
                    <label>Font Size:</label>
                    <input type="range" id="elementFontSize" min="0.5" max="3" step="0.1" value="1" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementFontSizeValue">1em</span>
                </div>
                <div class="style-control">
                    <label>Font Weight:</label>
                    <select id="elementFontWeight" onchange="updateSingleStyle(this)">
                        <option value="normal">Normal</option>
                        <option value="bold">Bold</option>
                        <option value="lighter">Lighter</option>
                        <option value="bolder">Bolder</option>
                        <option value="100">100</option>
                        <option value="300">300</option>
                        <option value="500">500</option>
                        <option value="700">700</option>
                        <option value="900">900</option>
                    </select>
                </div>
                <div class="style-control">
                    <label>Text Align:</label>
                    <select id="elementTextAlign" onchange="updateSingleStyle(this)">
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                        <option value="justify">Justify</option>
                    </select>
                </div>
                <div class="style-control">
                    <label>Line Height:</label>
                    <input type="range" id="elementLineHeight" min="1" max="3" step="0.1" value="1.6" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementLineHeightValue">1.6</span>
                </div>
                <div class="style-control">
                    <label>Letter Spacing:</label>
                    <input type="range" id="elementLetterSpacing" min="-2" max="5" step="0.1" value="0" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementLetterSpacingValue">0px</span>
                </div>
            </div>
        `;
    }
    
    // Dimensions (for images and containers)
    if (allowedOptions.includes('dimensions')) {
        html += `
            <div class="style-group">
                <h4>Dimensions</h4>
                <div class="style-control">
                    <label>Width:</label>
                    <input type="range" id="elementWidth" min="10" max="100" value="100" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementWidthValue">100%</span>
                </div>
                <div class="style-control">
                    <label>Max Width:</label>
                    <input type="range" id="elementMaxWidth" min="100" max="800" value="400" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementMaxWidthValue">400px</span>
                </div>
                <div class="style-control">
                    <label>Height:</label>
                    <select id="elementHeight" onchange="updateSingleStyle(this)">
                        <option value="auto">Auto</option>
                        <option value="200px">200px</option>
                        <option value="300px">300px</option>
                        <option value="400px">400px</option>
                        <option value="500px">500px</option>
                    </select>
                </div>
            </div>
        `;
    }
    
    // Spacing
    if (allowedOptions.includes('spacing')) {
        html += `
            <div class="style-group">
                <h4>Spacing</h4>
                <div class="style-control">
                    <label>Margin Top:</label>
                    <input type="range" id="elementMarginTop" min="0" max="100" value="15" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementMarginTopValue">15px</span>
                </div>
                <div class="style-control">
                    <label>Margin Bottom:</label>
                    <input type="range" id="elementMarginBottom" min="0" max="100" value="15" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementMarginBottomValue">15px</span>
                </div>
                <div class="style-control">
                    <label>Padding:</label>
                    <input type="range" id="elementPadding" min="0" max="50" value="0" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementPaddingValue">0px</span>
                </div>
            </div>
        `;
    }
    
    // Background
    if (allowedOptions.includes('background')) {
        html += `
            <div class="style-group">
                <h4>Background</h4>
                <div class="style-control">
                    <label>Background:</label>
                    <input type="color" id="elementBackground" oninput="updateSingleStyle(this)">
                </div>
                <div class="style-control">
                    <label>Opacity:</label>
                    <input type="range" id="elementBackgroundOpacity" min="0" max="1" step="0.1" value="1" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementBackgroundOpacityValue">100%</span>
                </div>
                <div class="style-control">
                    <label>Border Radius:</label>
                    <input type="range" id="elementBorderRadius" min="0" max="50" value="0" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementBorderRadiusValue">0px</span>
                </div>
            </div>
        `;
    }
    
    // Effects
    if (allowedOptions.includes('effects')) {
        html += `
            <div class="style-group">
                <h4>Effects</h4>
                <div class="style-control">
                    <label>Shadow:</label>
                    <input type="range" id="elementShadow" min="0" max="20" value="0" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementShadowValue">0px</span>
                </div>
                <div class="style-control">
                    <label>Border Width:</label>
                    <input type="range" id="elementBorderWidth" min="0" max="10" value="0" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementBorderWidthValue">0px</span>
                </div>
                <div class="style-control">
                    <label>Border Color:</label>
                    <input type="color" id="elementBorderColor" oninput="updateSingleStyle(this)">
                </div>
            </div>
        `;
    }
    
    // Transform
    if (allowedOptions.includes('transform')) {
        html += `
            <div class="style-group">
                <h4>Transform</h4>
                <div class="style-control">
                    <label>Rotate:</label>
                    <input type="range" id="elementRotate" min="-45" max="45" value="0" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementRotateValue">0¬∞</span>
                </div>
                <div class="style-control">
                    <label>Scale:</label>
                    <input type="range" id="elementScale" min="0.5" max="2" step="0.1" value="1" oninput="updateSingleStyle(this)">
                    <span class="range-value" id="elementScaleValue">1</span>
                </div>
            </div>
        `;
    }
    
    // Layout (for containers)
    if (allowedOptions.includes('layout')) {
        html += `
            <div class="style-group">
                <h4>Layout</h4>
                <div class="style-control">
                    <label>Display:</label>
                    <select id="elementDisplay" onchange="updateSingleStyle(this)">
                        <option value="block">Block</option>
                        <option value="inline-block">Inline Block</option>
                        <option value="flex">Flex</option>
                        <option value="grid">Grid</option>
                    </select>
                </div>
                <div class="style-control">
                    <label>Justify:</label>
                    <select id="elementJustify" onchange="updateSingleStyle(this)">
                        <option value="flex-start">Start</option>
                        <option value="center">Center</option>
                        <option value="flex-end">End</option>
                        <option value="space-between">Space Between</option>
                        <option value="space-around">Space Around</option>
                    </select>
                </div>
                <div class="style-control">
                    <label>Align Items:</label>
                    <select id="elementAlign" onchange="updateSingleStyle(this)">
                        <option value="stretch">Stretch</option>
                        <option value="flex-start">Start</option>
                        <option value="center">Center</option>
                        <option value="flex-end">End</option>
                    </select>
                </div>
            </div>
        `;
    }
    
    elementStylesDiv.innerHTML = html;
}

function updateSingleStyle(control) {
    if (!selectedElement) return;
    
    const elementId = selectedElement.dataset.elementId;
    const elementType = selectedElement.dataset.elementType;
    
    // Get existing styles or create new object
    let styles = elementStyles.get(elementId) || {};
    
    // Update only the changed property
    const property = control.id.replace('element', '').toLowerCase();
    styles[property] = control.value;
    
    // Special handling for H1 color
    if (elementType === 'Heading 1' && property === 'color') {
        selectedElement.classList.add('override-gradient');
    }
    
    // Save updated styles
    elementStyles.set(elementId, styles);
    
    // Update the range value display if applicable
    if (control.type === 'range') {
        const valueSpan = document.getElementById(control.id + 'Value');
        if (valueSpan) {
            let value = control.value;
            let unit = '';
            
            if (control.id.includes('FontSize') || control.id.includes('LineHeight') || control.id.includes('Scale')) {
                unit = control.id.includes('FontSize') ? 'em' : '';
            } else if (control.id.includes('Rotate')) {
                unit = '¬∞';
            } else if (control.id.includes('Opacity')) {
                value = Math.round(value * 100);
                unit = '%';
            } else if (control.id.includes('Width') && !control.id.includes('MaxWidth')) {
                unit = '%';
            } else {
                unit = 'px';
            }
            
            valueSpan.textContent = value + unit;
        }
    }
    
    // Apply the styles
    applyStyles();
}

function loadElementStyles() {
    if (!selectedElement) return;
    
    const elementId = selectedElement.dataset.elementId;
    const styles = elementStyles.get(elementId) || {};
    
    // Set default values for all controls first
    document.querySelectorAll('#elementStyles input, #elementStyles select').forEach(control => {
        const property = control.id.replace('element', '').toLowerCase();
        
        // Set default values based on control type
        if (control.type === 'range') {
            if (property === 'fontsize') control.value = '1';
            else if (property === 'lineheight') control.value = '1.6';
            else if (property === 'letterspacing') control.value = '0';
            else if (property === 'width') control.value = '100';
            else if (property === 'maxwidth') control.value = '400';
            else if (property === 'margintop' || property === 'marginbottom') control.value = '15';
            else if (property === 'padding') control.value = '0';
            else if (property === 'backgroundopacity') control.value = '1';
            else if (property === 'borderradius') control.value = '0';
            else if (property === 'shadow') control.value = '0';
            else if (property === 'borderwidth') control.value = '0';
            else if (property === 'rotate') control.value = '0';
            else if (property === 'scale') control.value = '1';
        } else if (control.type === 'color') {
            if (property === 'color') control.value = '#333333';
            else if (property === 'background') control.value = '#ffffff';
            else if (property === 'bordercolor') control.value = '#cccccc';
        } else if (control.type === 'select-one') {
            if (property === 'fontweight') control.value = 'normal';
            else if (property === 'textalign') control.value = 'left';
            else if (property === 'height') control.value = 'auto';
            else if (property === 'display') control.value = 'block';
            else if (property === 'justify') control.value = 'flex-start';
            else if (property === 'align') control.value = 'stretch';
        }
        
        // Then override with saved values if they exist
        if (styles[property] !== undefined) {
            control.value = styles[property];
        }
    });
    
    // Check if this is a heading with custom color
    if (selectedElement.classList.contains('override-gradient')) {
        // Make sure the color control shows the actual color
        const colorControl = document.getElementById('elementColor');
        if (colorControl && styles.color) {
            colorControl.value = styles.color;
        }
    }
    
    updateRangeValues();
}

function updateElementStyles() {
    if (!selectedElement) return;
    
    const elementId = selectedElement.dataset.elementId;
    const elementType = selectedElement.dataset.elementType;
    
    // Get existing styles or create new object
    let styles = elementStyles.get(elementId) || {};
    
    // Only update the changed property, not all properties
    const changedControl = document.activeElement;
    if (changedControl && changedControl.id && changedControl.id.startsWith('element')) {
        const property = changedControl.id.replace('element', '').toLowerCase();
        styles[property] = changedControl.value;
        
        // Special handling for H1 color
        if (elementType === 'Heading 1' && property === 'color') {
            selectedElement.classList.add('override-gradient');
        }
    }
    
    // Save updated styles
    elementStyles.set(elementId, styles);
    updateRangeValues();
    applyStyles();
}

        function updateStyles() {
            updateRangeValues();
            applyStyles();
        }

        function updateRangeValues() {
            // Global range values
            const baseFontSize = document.getElementById('baseFontSize');
            const globalLineHeight = document.getElementById('globalLineHeight');
            const sectionOpacity = document.getElementById('sectionOpacity');
            const sectionRadius = document.getElementById('sectionRadius');
            const sectionShadow = document.getElementById('sectionShadow');
            const sectionSpacing = document.getElementById('sectionSpacing');
            const buttonRadius = document.getElementById('buttonRadius');
            
            if (baseFontSize) document.getElementById('baseFontSizeValue').textContent = baseFontSize.value + 'px';
            if (globalLineHeight) document.getElementById('globalLineHeightValue').textContent = globalLineHeight.value;
            if (sectionOpacity) document.getElementById('sectionOpacityValue').textContent = Math.round(sectionOpacity.value * 100) + '%';
            if (sectionRadius) document.getElementById('sectionRadiusValue').textContent = sectionRadius.value + 'px';
            if (sectionShadow) document.getElementById('sectionShadowValue').textContent = sectionShadow.value + 'px';
            if (sectionSpacing) document.getElementById('sectionSpacingValue').textContent = sectionSpacing.value + 'px';
            if (buttonRadius) document.getElementById('buttonRadiusValue').textContent = buttonRadius.value + 'px';
            
            // Element range values
            const rangeInputs = document.querySelectorAll('#elementStyles input[type="range"]');
            rangeInputs.forEach(input => {
                const valueSpan = document.getElementById(input.id + 'Value');
                if (valueSpan) {
                    let value = input.value;
                    let unit = '';
                    
                    if (input.id.includes('FontSize') || input.id.includes('LineHeight') || input.id.includes('Scale')) {
                        unit = input.id.includes('FontSize') ? 'em' : '';
                    } else if (input.id.includes('Rotate')) {
                        unit = '¬∞';
                    } else if (input.id.includes('Opacity')) {
                        value = Math.round(value * 100);
                        unit = '%';
                    } else if (input.id.includes('Width') && !input.id.includes('MaxWidth')) {
                        unit = '%';
                    } else {
                        unit = 'px';
                    }
                    
                    valueSpan.textContent = value + unit;
                }
            });
        }

        function applyStyles() {
            const bgGradient1 = document.getElementById('bgGradient1')?.value || '#667eea';
            const bgGradient2 = document.getElementById('bgGradient2')?.value || '#764ba2';
            const bgDirection = document.getElementById('bgDirection')?.value || '135deg';
            const fontFamily = document.getElementById('fontFamily')?.value || "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
            const baseFontSize = document.getElementById('baseFontSize')?.value || '16';
            const globalTextColor = document.getElementById('globalTextColor')?.value || '#333333';
            const globalLineHeight = document.getElementById('globalLineHeight')?.value || '1.6';
            const h1Color = document.getElementById('h1Color')?.value || '#4a5568';
            const h2Color = document.getElementById('h2Color')?.value || '#2d3748';
            const h3Color = document.getElementById('h3Color')?.value || '#4a5568';
            const headingWeight = document.getElementById('headingWeight')?.value || 'normal';
            const sectionBg = document.getElementById('sectionBg')?.value || '#ffffff';
            const sectionOpacity = document.getElementById('sectionOpacity')?.value || '0.95';
            const sectionRadius = document.getElementById('sectionRadius')?.value || '15';
            const sectionShadow = document.getElementById('sectionShadow')?.value || '8';
            const sectionSpacing = document.getElementById('sectionSpacing')?.value || '40';
            const linkColor = document.getElementById('linkColor')?.value || '#667eea';
            const buttonStyle = document.getElementById('buttonStyle')?.value || 'gradient';
            const buttonRadius = document.getElementById('buttonRadius')?.value || '25';

            let css = `
                body {
                    background: linear-gradient(${bgDirection}, ${bgGradient1} 0%, ${bgGradient2} 100%) !important;
                    font-family: ${fontFamily} !important;
                    font-size: ${baseFontSize}px !important;
                    color: ${globalTextColor} !important;
                    line-height: ${globalLineHeight} !important;
                }
                
                .header, .section {
                    background: ${hexToRgba(sectionBg, sectionOpacity)} !important;
                    border-radius: ${sectionRadius}px !important;
                    box-shadow: 0 ${sectionShadow}px ${sectionShadow * 2}px rgba(0, 0, 0, 0.1) !important;
                    padding: ${sectionSpacing}px !important;
                }
                
                h1, h2, h3, h4, h5, h6 {
                    font-weight: ${headingWeight} !important;
                }
                
                h1 {
                    color: ${h1Color} !important;
                    background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                    -webkit-background-clip: text !important;
                    -webkit-text-fill-color: transparent !important;
                    background-clip: text !important;
                }
[data-element-id].override-gradient {
    background: none !important;
    -webkit-text-fill-color: currentColor !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
}
                
                h2 {
                    color: ${h2Color} !important;
                    border-bottom-color: ${linkColor} !important;
                }
                
                h3 {
                    color: ${h3Color} !important;
                }
                
                a, nav a {
                    color: ${linkColor} !important;
                }
                
                nav a:hover {
                    background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                }
            `;

            // Button styles
            if (buttonStyle === 'gradient') {
                css += `
                    button {
                        background: linear-gradient(45deg, ${bgGradient1}, ${bgGradient2}) !important;
                        border-radius: ${buttonRadius}px !important;
                        color: white !important;
                        border: none !important;
                    }
                `;
            } else if (buttonStyle === 'solid') {
                css += `
                    button {
                        background: ${linkColor} !important;
                        border-radius: ${buttonRadius}px !important;
                        color: white !important;
                        border: none !important;
                    }
                `;
            } else if (buttonStyle === 'outline') {
                css += `
                    button {
                        background: transparent !important;
                        border: 2px solid ${linkColor} !important;
                        border-radius: ${buttonRadius}px !important;
                        color: ${linkColor} !important;
                    }
                `;
            } else if (buttonStyle === 'minimal') {
                css += `
                    button {
                        background: transparent !important;
                        border: none !important;
                        border-radius: ${buttonRadius}px !important;
                        color: ${linkColor} !important;
                        text-decoration: underline !important;
                    }
                `;
            }

            // Apply element-specific styles
            elementStyles.forEach((styles, elementId) => {
                let elementCss = '';
                
                Object.keys(styles).forEach(property => {
                    const value = styles[property];
                    
                    switch(property) {
                        case 'color':
                            elementCss += `color: ${value} !important; `;
                            break;
                        case 'fontsize':
                            elementCss += `font-size: ${value}em !important; `;
                            break;
                        case 'fontweight':
                            elementCss += `font-weight: ${value} !important; `;
                            break;
                        case 'textalign':
                            elementCss += `text-align: ${value} !important; `;
                            break;
                        case 'lineheight':
                            elementCss += `line-height: ${value} !important; `;
                            break;
                        case 'letterspacing':
                            elementCss += `letter-spacing: ${value}px !important; `;
                            break;
                        case 'width':
                            elementCss += `width: ${value}% !important; `;
                            break;
                        case 'maxwidth':
                            elementCss += `max-width: ${value}px !important; `;
                            break;
                        case 'height':
                            if (value !== 'auto') elementCss += `height: ${value} !important; `;
                            break;
                        case 'margintop':
                            elementCss += `margin-top: ${value}px !important; `;
                            break;
                        case 'marginbottom':
                            elementCss += `margin-bottom: ${value}px !important; `;
                            break;
                        case 'padding':
                            elementCss += `padding: ${value}px !important; `;
                            break;
                        case 'background':
                            const opacity = styles['backgroundopacity'] || '1';
                            if (value !== '#ffffff' || opacity !== '1') {
                                elementCss += `background: ${hexToRgba(value, opacity)} !important; `;
                            }
                            break;
                        case 'borderradius':
                            if (value !== '0') elementCss += `border-radius: ${value}px !important; `;
                            break;
                        case 'shadow':
                            if (value !== '0') elementCss += `box-shadow: 0 ${value}px ${value * 2}px rgba(0,0,0,0.1) !important; `;
                            break;
                        case 'borderwidth':
                            if (value !== '0') {
                                const borderColor = styles['bordercolor'] || '#cccccc';
                                elementCss += `border: ${value}px solid ${borderColor} !important; `;
                            }
                            break;
                        case 'rotate':
                            if (value !== '0') elementCss += `transform: rotate(${value}deg) !important; `;
                            break;
                        case 'scale':
                            if (value !== '1') elementCss += `transform: scale(${value}) !important; `;
                            break;
                        case 'display':
                            elementCss += `display: ${value} !important; `;
                            break;
                        case 'justify':
                            elementCss += `justify-content: ${value} !important; `;
                            break;
                        case 'align':
                            elementCss += `align-items: ${value} !important; `;
                            break;
                    }
                });
                
                if (elementCss) {
                    css += `[data-element-id="${elementId}"] { ${elementCss} }\n`;
                }
            });

            let styleElement = document.getElementById('dynamicStyles');
            if (!styleElement) {
                styleElement = document.createElement('style');
                styleElement.id = 'dynamicStyles';
                document.head.appendChild(styleElement);
            }
            styleElement.textContent = css;
        }

        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        function resetStyles() {
            elementStyles.clear();
            selectedElement = null;
            updateStylePanel();
            
            // Reset global controls
            document.getElementById('bgGradient1').value = '#667eea';
            document.getElementById('bgGradient2').value = '#764ba2';
            document.getElementById('bgDirection').value = '135deg';
            document.getElementById('fontFamily').value = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
            document.getElementById('baseFontSize').value = '16';
            document.getElementById('globalTextColor').value = '#333333';
            document.getElementById('globalLineHeight').value = '1.6';
            document.getElementById('h1Color').value = '#4a5568';
            document.getElementById('h2Color').value = '#2d3748';
            document.getElementById('h3Color').value = '#4a5568';
            document.getElementById('headingWeight').value = 'normal';
            document.getElementById('sectionBg').value = '#ffffff';
            document.getElementById('sectionOpacity').value = '0.95';
            document.getElementById('sectionRadius').value = '15';
            document.getElementById('sectionShadow').value = '8';
            document.getElementById('sectionSpacing').value = '40';
            document.getElementById('linkColor').value = '#667eea';
            document.getElementById('buttonStyle').value = 'gradient';
            document.getElementById('buttonRadius').value = '25';
            
            applyStyles();
        }

        function clearWebsite() {
            document.getElementById('content').innerHTML = '';
            document.getElementById('configInput').value = '';
            elementStyles.clear();
            selectedElement = null;
            updateStylePanel();
        }

        function loadExample() {
            const example = `[header]
h1: My Amazing Website
p: Welcome to our innovative platform
nav: Home|About|Services|Portfolio|Contact

[section]
h2: Welcome to Our Platform
p: We create amazing digital experiences that transform businesses and delight users. Our team of experts is dedicated to delivering cutting-edge solutions.

[section]
[cols:2]
[col1]
h3: Our Services
list: Web Development|Mobile Apps|UI/UX Design|Digital Marketing|Consulting
p: We offer comprehensive digital solutions tailored to your business needs.
[col2]
h3: Why Choose Us
img: https://via.placeholder.com/400x250/667eea/ffffff?text=Our+Team
p: With years of experience and a passion for innovation, we deliver results that exceed expectations.

[section]
[cols:3]
[col1]
h3: Fast Delivery
p: Quick turnaround times without compromising quality.
btn: Learn More
[col2]
h3: Expert Team
p: Skilled professionals with proven track records.
btn: Meet the Team
[col3]
h3: 24/7 Support
p: Round-the-clock assistance for all your needs.
btn: Contact Support

[section]
h2: Get Started Today
p: Ready to transform your digital presence? Contact us now for a free consultation.
btn: Get Free Quote
btn: View Portfolio`;

            document.getElementById('configInput').value = example;
            generateWebsite();
        }

        function exportWebsite() {
            const content = document.getElementById('content');
            if (!content.innerHTML.trim()) {
                alert('No content to export! Generate a website first.');
                return;
            }

            // Create a clean version without selectable classes and labels
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = content.innerHTML;
            
            // Remove all selectable classes and element labels
            tempDiv.querySelectorAll('.selectable').forEach(el => {
                el.classList.remove('selectable', 'selected');
                // Keep data-element-id for styling purposes
                el.removeAttribute('data-element-type');
                el.onclick = null;
            });
            
            tempDiv.querySelectorAll('.element-label').forEach(label => label.remove());

            const currentStyles = document.getElementById('dynamicStyles')?.textContent || '';

            const html = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Generated Website</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            margin: 0 auto;
            padding: 80px 20px 20px 20px;
            max-width: 1200px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            margin: -60px -20px 40px -20px;
            padding: 40px 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            margin: 30px 0;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        .columns {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }

        .column {
            flex: 1;
            min-width: 0;
        }

        @media (max-width: 768px) {
            .columns {
                flex-direction: column;
                gap: 20px;
            }
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #4a5568;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            font-size: 2em;
            margin-bottom: 15px;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: #4a5568;
        }

        p {
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.7;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
            transition: transform 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            padding: 20px 0;
            border-top: 2px solid rgba(102, 126, 234, 0.2);
            border-bottom: 2px solid rgba(102, 126, 234, 0.2);
        }

        nav a {
            color: #667eea;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        nav a:hover {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }

        ${currentStyles}
    </style>
</head>
<body>
    <div class="container">
        ${tempDiv.innerHTML}
    </div>
</body>
</html>`;

            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `website-${new Date().toISOString().slice(0, 10)}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('Website exported successfully!');
        }

        // Load example on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadExample();
        });

        // Click outside to deselect
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.selectable') && !e.target.closest('.panel')) {
                if (selectedElement) {
                    selectedElement.classList.remove('selected');
                    selectedElement = null;
                    updateStylePanel();
                }
            }
        });
    </script>
</body>
</html>
